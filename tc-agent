
#!/Library/Frameworks/Python.framework/Versions/2.7/bin/python
# -*- coding: utf-8 -*-

import os
import json
import urllib
import urllib2
import subprocess
import shlex

name = ''
email = ''
assettag = ''


# Check if Xcode Command Line Tools are installed
if os.system('xcode-select -p') != 0:
  print "Installing XCode Tools"
  os.system('xcode-select --install')
  print "**************************************************************"
  print "Install the XCode Command Line Tools and run this script again"
  print "**************************************************************"
  exit()
  
# Download TAB files
os.system('sudo mkdir /Library/TAB')
# TAB icon
os.system('sudo curl -o /Library/TAB/tab-icon.png https://it-services.s3-eu-west-1.amazonaws.com/TeamCity+Script+Resources/TAB_600x600.png')
os.system('sudo curl -o /Library/TAB/teamcity-icon.png https://it-services.s3-eu-west-1.amazonaws.com/TeamCity+Script+Resources/teamcity-icon-logo-png-transparent.png')

# Change User Icons 

sudo /usr/bin/dscl . delete /Users/teamcity JPEGPhoto
sudo /usr/bin/dscl . create /Users/teamcity Picture "Library/TAB/teamcity-icon.png"
sudo /usr/bin/dscl . delete /Users/tabadmin JPEGPhoto
sudo /usr/bin/dscl . create /Users/tabadmin Picture "Library/TAB/tab-icon.png"

# Enabling Remote Login, Remote Management and Remote Apple Events

sudo systemsetup -setremotelogin on
sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -activate -configure -access -on -users admin -privs -all -restart -agent -menu
sudo systemsetup -setremoteappleevents on
